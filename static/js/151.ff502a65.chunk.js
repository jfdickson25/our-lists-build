"use strict";(self.webpackChunkour_lists_react=self.webpackChunkour_lists_react||[]).push([[151],{151:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a(791),n=a(689),i=a(184);const o=()=>{const e=(0,n.s0)(),{id:t}=(0,n.UO)(),[a,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(""),[l,m]=(0,s.useState)([]),[r,h]=(0,s.useState)([]),[p,g]=(0,s.useState)(!1),[f,u]=(0,s.useState)(""),[y,v]=(0,s.useState)(!1);(0,s.useEffect)((()=>{fetch("http://localhost:5000/list/".concat(t)).then((e=>e.json())).then((e=>{d(e.list.name),e.list.categories.forEach((e=>{e.newItem="",e.movingDown=!1,e.movingUp=!1})),e.list.categories.forEach((e=>{e.items.forEach((e=>{e.activeEdit=!1}))})),m(e.list.categories),h(e.list.crossedOff)}))}),[]);const x=(e,a,s)=>{fetch("http://localhost:5000/list/changeQnt",{method:"POST",body:JSON.stringify({code:t,quantity:s,categoryIndex:e,itemIndex:a}),headers:{"Content-Type":"application/json"}});const n=[...l];n[e].items[a].quantity=s,m(n)};return(0,i.jsxs)("div",{id:"content",children:[(0,i.jsxs)("div",{id:"header",children:[(0,i.jsx)("img",{id:"back",src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/back.png?v=1703820361532",alt:"back",onClick:()=>{o(!0),setTimeout((()=>{o(!1),e("/myLists")}),1e3)},style:a?{animation:"button-press .75s"}:null}),(0,i.jsx)("p",{children:c}),(0,i.jsx)("img",{id:"refresh",src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/refresh.png?v=1703820199335",alt:"refresh",style:y?{transform:"rotate(360deg)",transitionDuration:".5s"}:null,onClick:()=>{v(!0),setTimeout((()=>{v(!1),window.location.reload()}),500)}}),(0,i.jsxs)("div",{id:"code",children:["Code: ",t]}),(0,i.jsx)("div",{id:"add-category",onClick:()=>{g(!0)},children:"+"})]}),l.map(((e,a)=>(0,i.jsxs)("div",{className:"category",id:e.name,style:e.movingDown?{transform:"translateY(".concat(document.getElementById(l[a+1].name).clientHeight+50,"px)"),transitionDuration:".5s"}:e.movingUp?{transform:"translateY(-".concat(document.getElementById(l[a-1].name).clientHeight+50,"px)"),transitionDuration:".5s"}:null,children:[(0,i.jsxs)("div",{className:"category-header",children:[(0,i.jsx)("div",{className:"move-down",onClick:()=>{if(a===l.length-1)return;let s=[...l];s[a].movingDown=!0,s[a+1].movingUp=!0,m(s),setTimeout((()=>{(e=>{const a=[...l],s=a[e];a[e]=a[e+1],a[e+1]=s,a[e+1].movingDown=!1,a[e].movingUp=!1,m(a),fetch("http://localhost:5000/list/moveDown",{method:"POST",body:JSON.stringify({code:t,index:e}),headers:{"Content-Type":"application/json"}})})(a,e.name)}),500)},children:"\u25bc"}),(0,i.jsx)("div",{className:"move-up",onClick:()=>{if(0===a)return;let s=[...l];s[a].movingUp=!0,s[a-1].movingDown=!0,m(s),setTimeout((()=>{(e=>{const a=[...l],s=a[e];a[e]=a[e-1],a[e-1]=s,a[e-1].movingUp=!1,a[e].movingDown=!1,m(a),fetch("http://localhost:5000/list/moveUp",{method:"POST",body:JSON.stringify({code:t,index:e}),headers:{"Content-Type":"application/json"}})})(a,e.name)}),500)},children:"\u25b2"}),(0,i.jsx)("p",{className:"category-title",children:e.name}),(0,i.jsx)("img",{className:"delete-category",src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/delete.png?v=1703725625808",alt:"delete",onClick:()=>{(e=>{const a=l.filter((t=>t.name!==e));m(a),fetch("http://localhost:5000/list/category",{method:"DELETE",body:JSON.stringify({code:t,categoryName:e}),headers:{"Content-Type":"application/json"}})})(e.name)}}),(0,i.jsxs)("div",{className:"add-item",children:[(0,i.jsx)("input",{type:"text",placeholder:"Item Description",className:"add-item-input",onChange:e=>{const t=[...l];t[a].newItem=e.target.value,m(t)},value:e.newItem}),(0,i.jsx)("img",{src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/plus-green.png?v=1703819381081",className:"add-item-plus",onClick:()=>{if(""===e.newItem)return;fetch("http://localhost:5000/list/addItem",{method:"POST",body:JSON.stringify({code:t,category:e.name,item:e.newItem,qnt:1}),headers:{"Content-Type":"application/json"}});const s=[...l];s[a].items.push({name:e.newItem,quantity:1}),s[a].newItem="",m(s)}})]})]}),(0,i.jsx)("div",{className:"items",children:e.items.map(((s,n)=>(0,i.jsxs)("div",{className:"item",children:[s.activeEdit?(0,i.jsx)("input",{type:"text",className:"item-update-input",onChange:e=>{const t=[...l];t[a].items[n].name=e.target.value,m(t)},value:s.name,onBlur:()=>{fetch("http://localhost:5000/list/changeItemName",{method:"POST",body:JSON.stringify({code:t,name:s.name,categoryIndex:a,itemIndex:n}),headers:{"Content-Type":"application/json"}});const e=[...l];e[a].items[n].activeEdit=!1,m(e)}}):(0,i.jsx)("p",{className:"item-name",onClick:()=>{const e=[...l];e[a].items[n].activeEdit=!0,m(e),setTimeout((()=>{document.getElementsByClassName("category")[a].getElementsByClassName("item")[n].getElementsByClassName("item-update-input")[0].focus()}),0)},children:s.name}),(0,i.jsx)("img",{src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/minus-beige.png?v=1703820118196",className:"item-qnt-down",onClick:()=>{1!==parseInt(s.quantity)&&x(a,n,parseInt(s.quantity)-1)}}),(0,i.jsx)("p",{className:"item-qnt",children:s.quantity}),(0,i.jsx)("img",{src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/plus-beige.png?v=1703819641865",className:"item-qnt-up",onClick:()=>{x(a,n,parseInt(s.quantity)+1)}}),(0,i.jsx)("img",{src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/delete.png?v=1703726678591",className:"item-delete",onClick:()=>{const i=[...l],o=[...r];o.push(i[a].items[n]),i[a].items.splice(n,1),m(i),h(o),fetch("http://localhost:5000/list/crossOff",{method:"POST",body:JSON.stringify({code:t,category:e.name,name:s.name,quantity:s.quantity,categoryIndex:a,itemIndex:n}),headers:{"Content-Type":"application/json"}})}})]},n)))})]},a))),(0,i.jsx)("div",{id:"crossed-off-title",children:"Crossed Off"}),r&&r.map(((e,a)=>(0,i.jsxs)("div",{className:"crossed-off-item",children:[(0,i.jsxs)("p",{className:"crossed-off-item-desc",onClick:()=>{const s=[...l],n=[...r],i=s.findIndex((e=>e.name===e.name));s[i].items.push(n[a]),n.splice(a,1),m(s),h(n),fetch("http://localhost:5000/list/uncrossOff",{method:"POST",body:JSON.stringify({code:t,name:e.name,quantity:e.quantity,categoryIndex:i,itemIndex:a}),headers:{"Content-Type":"application/json"}})},children:[e.quantity," - ",e.name]}),(0,i.jsx)("img",{src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/permDelete.png?v=1703740581264",className:"crossed-off-item-delete",onClick:()=>{const e=[...r];e.splice(a,1),h(e),fetch("http://localhost:5000/list/item",{method:"DELETE",body:JSON.stringify({code:t,itemIndex:a}),headers:{"Content-Type":"application/json"}})}})]},a))),(0,i.jsx)("div",{className:"footer"}),p?(0,i.jsxs)(s.Fragment,{children:[(0,i.jsx)("div",{id:"add-category-overlay",onClick:()=>{g(!1),u("")}}),(0,i.jsxs)("div",{id:"add-category-modal",children:[(0,i.jsx)("input",{id:"add-category-input",type:"text",placeholder:"Category Name",onChange:e=>{u(e.target.value)},value:f}),(0,i.jsx)("button",{id:"add-category-btn",onClick:()=>{if(""===f)return;m([{name:f,items:[]},...l]),fetch("http://localhost:5000/list/addCategory",{method:"POST",body:JSON.stringify({code:t,categoryName:f}),headers:{"Content-Type":"application/json"}}),g(!1),u("")},children:"Add"})]})]}):null]})}}}]);
//# sourceMappingURL=151.ff502a65.chunk.js.map