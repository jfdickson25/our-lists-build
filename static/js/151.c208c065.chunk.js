"use strict";(self.webpackChunkour_lists_react=self.webpackChunkour_lists_react||[]).push([[151],{151:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var a=s(791),i=s(689),n=s(184);const o=()=>{const e=(0,i.s0)(),{id:t}=(0,i.UO)(),[s,o]=(0,a.useState)(!1),[c,l]=(0,a.useState)(""),[d,m]=(0,a.useState)([]),[r,g]=(0,a.useState)([]),[h,p]=(0,a.useState)(!1),[u,f]=(0,a.useState)(""),[y,v]=(0,a.useState)(!1),[x,j]=(0,a.useState)(0),[C,N]=(0,a.useState)(!1);(0,a.useEffect)((()=>{fetch("https://our-lists.glitch.me/list/".concat(t)).then((e=>e.json())).then((e=>{l(e.list.name),e.list.categories.forEach((e=>{e.newItem="",e.movingDown=!1,e.movingUp=!1})),e.list.categories.forEach((e=>{e.activeEdit=!1,e.items.forEach((e=>{e.activeEdit=!1}))})),m(e.list.categories),g(e.list.crossedOff)}))}),[x]);const b=(e,s,a)=>{fetch("https://our-lists.glitch.me/list/changeQnt",{method:"POST",body:JSON.stringify({code:t,quantity:a,categoryIndex:e,itemIndex:s}),headers:{"Content-Type":"application/json"}});const i=[...d];i[e].items[s].quantity=a,m(i)};return(0,n.jsxs)("div",{id:"content",children:[(0,n.jsxs)("div",{id:"header",children:[(0,n.jsx)("img",{id:"back",src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/back.png?v=1703820361532",alt:"back",onClick:()=>{o(!0),setTimeout((()=>{o(!1),e("/myLists")}),1e3)},style:s?{animation:"button-press .75s"}:null}),(0,n.jsx)("p",{children:c}),(0,n.jsx)("img",{id:"refresh",src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/refresh.png?v=1703820199335",alt:"refresh",style:y?{transform:"rotate(360deg)",transitionDuration:".5s"}:null,onClick:()=>{v(!0),setTimeout((()=>{v(!1),j(x+1)}),500)}}),(0,n.jsxs)("div",{id:"code",children:["Code: ",t]}),(0,n.jsx)("div",{id:"add-category",onClick:()=>{p(!0)},children:"+"})]}),d.map(((e,s)=>(0,n.jsxs)("div",{className:"category",id:e.name,style:e.movingDown?{transform:"translateY(".concat(document.getElementById(d[s+1].name).clientHeight+50,"px)"),transitionDuration:".5s"}:e.movingUp?{transform:"translateY(-".concat(document.getElementById(d[s-1].name).clientHeight+50,"px)"),transitionDuration:".5s"}:null,children:[(0,n.jsxs)("div",{className:"category-header",children:[(0,n.jsx)("div",{className:"move-down",onClick:()=>{if(s===d.length-1)return;let a=[...d];a[s].movingDown=!0,a[s+1].movingUp=!0,m(a),setTimeout((()=>{(e=>{const s=[...d],a=s[e];s[e]=s[e+1],s[e+1]=a,s[e+1].movingDown=!1,s[e].movingUp=!1,m(s),fetch("https://our-lists.glitch.me/list/moveDown",{method:"POST",body:JSON.stringify({code:t,index:e}),headers:{"Content-Type":"application/json"}})})(s,e.name)}),500)},children:"\u25bc"}),(0,n.jsx)("div",{className:"move-up",onClick:()=>{if(0===s)return;let a=[...d];a[s].movingUp=!0,a[s-1].movingDown=!0,m(a),setTimeout((()=>{(e=>{const s=[...d],a=s[e];s[e]=s[e-1],s[e-1]=a,s[e-1].movingUp=!1,s[e].movingDown=!1,m(s),fetch("https://our-lists.glitch.me/list/moveUp",{method:"POST",body:JSON.stringify({code:t,index:e}),headers:{"Content-Type":"application/json"}})})(s,e.name)}),500)},children:"\u25b2"}),e.activeEdit?(0,n.jsx)("input",{type:"text",className:"category-update-input",onChange:e=>{const t=[...d];t[s].name=e.target.value,m(t)},value:e.name,onBlur:()=>{fetch("https://our-lists.glitch.me/list/changeCategoryName",{method:"POST",body:JSON.stringify({code:t,name:e.name,index:s}),headers:{"Content-Type":"application/json"}});const a=[...d];a[s].activeEdit=!1,m(a)}}):(0,n.jsx)("p",{className:"category-title",onClick:()=>{const e=[...d];e[s].activeEdit=!0,m(e),setTimeout((()=>{document.getElementsByClassName("category")[s].getElementsByClassName("category-update-input")[0].focus()}),0)},children:e.name}),(0,n.jsx)("img",{className:"delete-category",src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/delete.png?v=1703725625808",alt:"delete",onClick:()=>{(e=>{const s=d.filter((t=>t.name!==e));m(s),fetch("https://our-lists.glitch.me/list/category",{method:"DELETE",body:JSON.stringify({code:t,categoryName:e}),headers:{"Content-Type":"application/json"}})})(e.name)}}),(0,n.jsxs)("div",{className:"add-item",children:[(0,n.jsx)("input",{type:"text",placeholder:"Item Description",className:"add-item-input",onChange:e=>{const t=[...d];t[s].newItem=e.target.value,m(t)},value:e.newItem}),(0,n.jsx)("img",{src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/plus-green.png?v=1703819381081",className:"add-item-plus",onClick:()=>{if(""===e.newItem)return;fetch("https://our-lists.glitch.me/list/addItem",{method:"POST",body:JSON.stringify({code:t,category:e.name,item:e.newItem,qnt:1}),headers:{"Content-Type":"application/json"}});const a=[...d];a[s].items.push({name:e.newItem,quantity:1,category:e.name}),a[s].newItem="",m(a)}})]})]}),(0,n.jsx)("div",{className:"items",children:e.items.map(((a,i)=>(0,n.jsxs)("div",{className:"item",children:[a.activeEdit?(0,n.jsx)("input",{type:"text",className:"item-update-input",onChange:e=>{const t=[...d];t[s].items[i].name=e.target.value,m(t)},value:a.name,onBlur:()=>{fetch("https://our-lists.glitch.me/list/changeItemName",{method:"POST",body:JSON.stringify({code:t,name:a.name,categoryIndex:s,itemIndex:i}),headers:{"Content-Type":"application/json"}});const e=[...d];e[s].items[i].activeEdit=!1,m(e)}}):(0,n.jsx)("p",{className:"item-name",onClick:()=>{const e=[...d];e[s].items[i].activeEdit=!0,m(e),setTimeout((()=>{document.getElementsByClassName("category")[s].getElementsByClassName("item")[i].getElementsByClassName("item-update-input")[0].focus()}),0)},children:a.name}),(0,n.jsx)("img",{src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/minus-beige.png?v=1703820118196",className:"item-qnt-down",onClick:()=>{1!==parseInt(a.quantity)&&b(s,i,parseInt(a.quantity)-1)}}),(0,n.jsx)("p",{className:"item-qnt",children:a.quantity}),(0,n.jsx)("img",{src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/plus-beige.png?v=1703819641865",className:"item-qnt-up",onClick:()=>{b(s,i,parseInt(a.quantity)+1)}}),(0,n.jsx)("img",{src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/delete.png?v=1703726678591",className:"item-delete",onClick:()=>{const n=[...d],o=[...r];n[s].items[i].category=e.name,o.push(n[s].items[i]),n[s].items.splice(i,1),m(n),g(o),fetch("https://our-lists.glitch.me/list/crossOff",{method:"POST",body:JSON.stringify({code:t,category:e.name,name:a.name,quantity:a.quantity,categoryIndex:s,itemIndex:i}),headers:{"Content-Type":"application/json"}})}})]},i)))})]},s))),(0,n.jsx)("div",{id:"crossed-off-title",children:"Crossed Off"}),(0,n.jsx)("div",{id:"bomb-container",children:C?(0,n.jsx)("img",{id:"explosion",src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/explosion%20bang.png?v=1727633978134"}):(0,n.jsx)("img",{id:"bomb-img",src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/bomb-blast.png?v=1727631700707",onClick:()=>{0!==r.length&&(N(!0),setTimeout((()=>{N(!1),g([])}),800),fetch("https://our-lists.glitch.me/list/clearCrossedOff",{method:"POST",body:JSON.stringify({code:t}),headers:{"Content-Type":"application/json"}}))}})}),r&&r.map(((e,s)=>(0,n.jsxs)("div",{className:"crossed-off-item",children:[(0,n.jsxs)("p",{className:"crossed-off-item-desc",onClick:()=>{const a=[...d],i=[...r];console.log(e);const n=a.findIndex((t=>t.name===e.category));console.log(n),console.log(a[n]),a[n].items.push(i[s]),i.splice(s,1),m(a),g(i),fetch("https://our-lists.glitch.me/list/uncrossOff",{method:"POST",body:JSON.stringify({code:t,name:e.name,quantity:e.quantity,category:e.category,itemIndex:s}),headers:{"Content-Type":"application/json"}})},children:[e.quantity," - ",e.name]}),(0,n.jsx)("img",{src:"https://cdn.glitch.global/a505ce02-f570-40df-ad76-697af5e6acd7/permDelete.png?v=1703740581264",className:"crossed-off-item-delete",onClick:()=>{const e=[...r];e.splice(s,1),g(e),fetch("https://our-lists.glitch.me/list/item",{method:"DELETE",body:JSON.stringify({code:t,itemIndex:s}),headers:{"Content-Type":"application/json"}})}})]},s))),(0,n.jsx)("div",{className:"footer"}),h?(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)("div",{id:"add-category-overlay",onClick:()=>{p(!1),f("")}}),(0,n.jsxs)("div",{id:"add-category-modal",children:[(0,n.jsx)("input",{id:"add-category-input",type:"text",placeholder:"Category Name",onChange:e=>{f(e.target.value)},value:u}),(0,n.jsx)("button",{id:"add-category-btn",onClick:()=>{if(""===u)return;m([{name:u,items:[]},...d]),fetch("https://our-lists.glitch.me/list/addCategory",{method:"POST",body:JSON.stringify({code:t,categoryName:u}),headers:{"Content-Type":"application/json"}}),p(!1),f("")},children:"Add"})]})]}):null]})}}}]);
//# sourceMappingURL=151.c208c065.chunk.js.map